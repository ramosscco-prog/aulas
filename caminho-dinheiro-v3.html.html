<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>O Caminho do Dinheiro</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --gold: #C9A84C; --gold-light: #E8C97A;
  --dark: #080A0F; --dark2: #0F1219; --dark3: #161B26; --dark4: #1E2535;
  --text: #E2E4EE; --muted: #6B7494;
  --blue: #4A7FFF; --teal: #00C9A7; --purple: #9B6DFF; --red: #FF6B6B; --orange: #FF9F43;
}

body {
  background: var(--dark); color: var(--text);
  font-family: 'DM Sans', sans-serif;
  min-height: 100vh; display: flex; flex-direction: column; align-items: center;
  padding: 48px 24px 100px; overflow-x: hidden;
}

body::before {
  content: ''; position: fixed; inset: 0;
  background-image: linear-gradient(rgba(74,127,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(74,127,255,0.03) 1px, transparent 1px);
  background-size: 52px 52px; pointer-events: none; animation: gridShift 20s linear infinite;
}
body::after {
  content: ''; position: fixed; top: -200px; right: -200px;
  width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(201,168,76,0.05) 0%, transparent 70%);
  pointer-events: none;
}
@keyframes gridShift { 0%{background-position:0 0} 100%{background-position:52px 52px} }
@keyframes fadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }
@keyframes slideIn { from{opacity:0;transform:translateX(8px)} to{opacity:1;transform:translateX(0)} }
@keyframes pulseGold {
  0%,100%{box-shadow:0 0 0 0 rgba(201,168,76,0.3),0 0 20px rgba(201,168,76,0.1)}
  50%{box-shadow:0 0 0 12px rgba(201,168,76,0),0 0 30px rgba(201,168,76,0.2)}
}
@keyframes barGrow { from{width:0} to{width:var(--bar-w)} }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

/* ===== HEADER ===== */
header { text-align:center; margin-bottom:48px; animation:fadeUp 0.9s ease both; }
.eyebrow { font-size:10px; font-weight:500; letter-spacing:5px; text-transform:uppercase; color:var(--gold); margin-bottom:14px; opacity:0.8; }
h1 { font-family:'Playfair Display',serif; font-size:clamp(36px,6vw,64px); font-weight:900; background:linear-gradient(135deg,#fff 0%,var(--gold-light) 50%,var(--gold) 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; line-height:1.05; letter-spacing:-1px; }
.subtitle { margin-top:12px; font-size:13px; color:var(--muted); font-weight:300; }
.hint { margin-top:18px; display:inline-flex; align-items:center; gap:8px; background:rgba(74,127,255,0.08); border:1px solid rgba(74,127,255,0.2); border-radius:20px; padding:7px 16px; font-size:11px; color:rgba(74,127,255,0.9); }
.hint-dot { width:6px; height:6px; border-radius:50%; background:var(--blue); animation:blink 1.5s ease-in-out infinite; }

/* ===== TABS ===== */
.tabs-wrap { width:100%; max-width:1200px; margin-bottom:40px; animation:fadeUp 0.7s 0.15s ease both; }
.tabs { display:flex; gap:4px; background:var(--dark2); border:1px solid rgba(255,255,255,0.06); border-radius:14px; padding:5px; width:fit-content; margin:0 auto; }
.tab-btn {
  padding:10px 24px; border-radius:10px; border:none; background:transparent;
  font-family:'DM Sans',sans-serif; font-size:12px; font-weight:500; letter-spacing:0.5px;
  color:var(--muted); cursor:pointer; transition:all 0.25s; display:flex; align-items:center; gap:8px;
}
.tab-btn:hover { color:var(--text); background:rgba(255,255,255,0.04); }
.tab-btn.active { background:var(--dark4); color:var(--text); box-shadow:0 2px 12px rgba(0,0,0,0.3); }
.tab-btn .tab-icon { width:16px; height:16px; opacity:0.7; }
.tab-btn.active .tab-icon { opacity:1; }

.tab-panel { display:none; width:100%; max-width:1200px; }
.tab-panel.active { display:block; animation:fadeIn 0.35s ease; }

/* ===== FLOW DIAGRAM TAB ===== */
.stage { width:100%; max-width:1100px; position:relative; }
.investor-wrap { position:absolute; left:0; top:50%; transform:translateY(-50%); display:flex; flex-direction:column; align-items:center; gap:10px; z-index:10; animation:fadeUp 0.9s 0.1s ease both; }
.investor-ring { width:88px; height:88px; border-radius:50%; background:radial-gradient(circle at 35% 35%,#1E2535,#0F1219); border:1.5px solid rgba(201,168,76,0.4); display:flex; align-items:center; justify-content:center; animation:pulseGold 3s ease-in-out infinite; }
.investor-label { font-size:11px; font-weight:500; color:var(--gold); letter-spacing:2px; text-transform:uppercase; }
.channels { margin-left:130px; display:flex; flex-direction:column; gap:20px; padding:20px 0; }
.channel-row { display:flex; align-items:flex-start; gap:0; animation:fadeUp 0.8s ease both; }
.channel-row:nth-child(1){animation-delay:0.2s} .channel-row:nth-child(2){animation-delay:0.35s} .channel-row:nth-child(3){animation-delay:0.5s}

.h-wire { width:52px; height:2px; align-self:center; flex-shrink:0; position:relative; overflow:visible; }
.h-wire::before { content:''; position:absolute; left:0; top:0; width:100%; height:100%; background:linear-gradient(90deg,var(--wire-color,rgba(255,255,255,0.2)),rgba(255,255,255,0.05)); }
.h-wire::after { content:''; position:absolute; right:-1px; top:50%; transform:translateY(-50%); border:5px solid transparent; border-left-color:var(--wire-color,rgba(255,255,255,0.2)); }
.h-wire.gold{--wire-color:rgba(201,168,76,0.55)} .h-wire.blue{--wire-color:rgba(74,127,255,0.55)} .h-wire.teal{--wire-color:rgba(0,201,167,0.55)}

.channel-card { width:170px; flex-shrink:0; background:var(--dark2); border:1.5px solid rgba(255,255,255,0.07); border-radius:16px; padding:18px 16px; display:flex; flex-direction:column; align-items:center; gap:8px; cursor:pointer; transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1); position:relative; user-select:none; }
.channel-card:hover { transform:translateY(-3px) scale(1.02); }
.channel-card.active { transform:translateY(-3px) scale(1.02); }
.channel-card.c-bank:hover,.channel-card.c-bank.active { border-color:rgba(74,127,255,0.5); box-shadow:0 8px 30px rgba(74,127,255,0.2),inset 0 0 20px rgba(74,127,255,0.04); }
.channel-card.c-broker:hover,.channel-card.c-broker.active { border-color:rgba(0,201,167,0.5); box-shadow:0 8px 30px rgba(0,201,167,0.2),inset 0 0 20px rgba(0,201,167,0.04); }
.channel-card.c-fund:hover,.channel-card.c-fund.active { border-color:rgba(201,168,76,0.5); box-shadow:0 8px 30px rgba(201,168,76,0.2),inset 0 0 20px rgba(201,168,76,0.04); }
.channel-icon { width:46px; height:46px; border-radius:13px; display:flex; align-items:center; justify-content:center; margin-bottom:2px; }
.channel-name { font-size:13px; font-weight:600; text-align:center; }
.channel-desc { font-size:10px; color:var(--muted); text-align:center; line-height:1.5; }
.channel-badge { position:absolute; top:-8px; right:-8px; width:22px; height:22px; border-radius:50%; background:var(--badge-color,var(--blue)); border:2px solid var(--dark); display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:600; color:var(--dark); opacity:0; transform:scale(0); transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1); }
.channel-card.active .channel-badge { opacity:1; transform:scale(1); }
.expand-indicator { width:16px; height:16px; border-radius:50%; background:rgba(255,255,255,0.05); display:flex; align-items:center; justify-content:center; transition:all 0.3s; margin-top:4px; }
.channel-card.active .expand-indicator { background:rgba(74,127,255,0.2); transform:rotate(180deg); }
.tooltip { position:absolute; bottom:calc(100% + 8px); left:50%; transform:translateX(-50%); background:var(--dark4); border:1px solid rgba(255,255,255,0.1); border-radius:8px; padding:6px 12px; font-size:10px; color:var(--muted); white-space:nowrap; pointer-events:none; opacity:0; transition:opacity 0.2s; z-index:100; }
.channel-card:hover .tooltip { opacity:1; }

.alloc-panel { overflow:hidden; width:0; max-width:0; opacity:0; transition:all 0.5s cubic-bezier(0.4,0,0.2,1); display:flex; align-items:center; gap:0; pointer-events:none; }
.alloc-panel.open { width:auto; max-width:800px; opacity:1; pointer-events:all; }
.alloc-inner { display:flex; align-items:stretch; gap:0; padding-left:2px; }
.alloc-types { display:flex; flex-direction:column; gap:10px; flex-shrink:0; }
.alloc-type { background:var(--dark3); border:1.5px solid rgba(255,255,255,0.06); border-radius:13px; padding:12px 36px 12px 16px; cursor:pointer; transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1); position:relative; min-width:180px; user-select:none; }
.alloc-type:hover { transform:translateX(3px); }
.alloc-type.debt{border-left:3px solid var(--blue)} .alloc-type.equity{border-left:3px solid var(--gold)} .alloc-type.savings{border-left:3px solid var(--teal)}
.alloc-type.debt:hover,.alloc-type.debt.open { border-color:rgba(74,127,255,0.5); border-left-color:var(--blue); background:rgba(74,127,255,0.05); box-shadow:0 4px 20px rgba(74,127,255,0.12); transform:translateX(4px); }
.alloc-type.equity:hover,.alloc-type.equity.open { border-color:rgba(201,168,76,0.5); border-left-color:var(--gold); background:rgba(201,168,76,0.05); box-shadow:0 4px 20px rgba(201,168,76,0.12); transform:translateX(4px); }
.alloc-type.savings:hover,.alloc-type.savings.open { border-color:rgba(0,201,167,0.5); border-left-color:var(--teal); background:rgba(0,201,167,0.05); box-shadow:0 4px 20px rgba(0,201,167,0.12); transform:translateX(4px); }
.alloc-type-title { font-size:13px; font-weight:600; margin-bottom:3px; }
.debt .alloc-type-title{color:var(--blue)} .equity .alloc-type-title{color:var(--gold)} .savings .alloc-type-title{color:var(--teal)}
.alloc-type-sub { font-size:10px; color:var(--muted); }
.alloc-type-arrow { position:absolute; right:12px; top:50%; transform:translateY(-50%); color:var(--muted); font-size:14px; transition:transform 0.3s,color 0.3s; }
.alloc-type.open .alloc-type-arrow { transform:translateY(-50%) rotate(90deg); color:var(--text); }

.instruments-wrap { overflow:hidden; max-width:0; opacity:0; transition:all 0.4s cubic-bezier(0.4,0,0.2,1); display:flex; align-items:center; gap:0; flex-shrink:0; }
.instruments-wrap.show { max-width:300px; opacity:1; }
.instruments-box { background:var(--dark4); border:1.5px solid rgba(255,255,255,0.06); border-radius:14px; padding:16px; min-width:230px; }
.instruments-box-title { font-size:9px; letter-spacing:3.5px; text-transform:uppercase; margin-bottom:12px; padding-bottom:8px; border-bottom:1px solid rgba(255,255,255,0.07); }
.instruments-box-title.debt{color:var(--blue)} .instruments-box-title.equity{color:var(--gold)} .instruments-box-title.savings{color:var(--teal)}
.instrument-item { display:flex; align-items:flex-start; gap:10px; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.04); transition:all 0.2s; animation:slideIn 0.3s ease both; }
.instrument-item:last-child{border-bottom:none} .instrument-item:hover{transform:translateX(3px)}
.instrument-item:nth-child(1){animation-delay:0.05s} .instrument-item:nth-child(2){animation-delay:0.10s} .instrument-item:nth-child(3){animation-delay:0.15s} .instrument-item:nth-child(4){animation-delay:0.20s} .instrument-item:nth-child(5){animation-delay:0.25s} .instrument-item:nth-child(6){animation-delay:0.30s}
.instrument-dot { width:7px; height:7px; border-radius:50%; flex-shrink:0; margin-top:4px; }
.instrument-info { flex:1; }
.instrument-name { font-size:12px; font-weight:500; color:var(--text); line-height:1.3; }
.instrument-detail { font-size:10px; color:var(--muted); line-height:1.4; margin-top:2px; }
.mini-wire { width:32px; height:2px; flex-shrink:0; align-self:center; position:relative; }
.mini-wire::before { content:''; position:absolute; inset:0; background:linear-gradient(90deg,var(--wc),transparent); }
.mini-wire::after { content:''; position:absolute; right:0; top:50%; transform:translateY(-50%); border:4px solid transparent; border-left-color:var(--wc); }

.reset-btn { margin-top:32px; background:transparent; border:1px solid rgba(255,255,255,0.1); border-radius:20px; padding:7px 20px; font-size:11px; font-family:'DM Sans',sans-serif; color:var(--muted); cursor:pointer; transition:all 0.2s; letter-spacing:0.5px; }
.reset-btn:hover { border-color:rgba(255,255,255,0.25); color:var(--text); background:rgba(255,255,255,0.03); }

/* ===== RENTABILIDADE TAB ===== */
.returns-section { animation:fadeUp 0.5s ease both; }
.section-intro { text-align:center; margin-bottom:36px; }
.section-intro h2 { font-family:'Playfair Display',serif; font-size:28px; font-weight:700; color:var(--text); margin-bottom:8px; }
.section-intro p { font-size:13px; color:var(--muted); }

.scenario-controls { display:flex; justify-content:center; gap:12px; margin-bottom:36px; flex-wrap:wrap; }
.scenario-btn { padding:8px 20px; border-radius:20px; border:1.5px solid rgba(255,255,255,0.1); background:transparent; font-family:'DM Sans',sans-serif; font-size:12px; font-weight:500; color:var(--muted); cursor:pointer; transition:all 0.25s; }
.scenario-btn:hover { border-color:rgba(255,255,255,0.25); color:var(--text); }
.scenario-btn.active { border-color:var(--gold); color:var(--gold); background:rgba(201,168,76,0.08); }

.returns-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(340px,1fr)); gap:16px; margin-bottom:32px; }

.return-card { background:var(--dark2); border:1.5px solid rgba(255,255,255,0.07); border-radius:18px; padding:22px; transition:all 0.3s; cursor:default; }
.return-card:hover { border-color:rgba(255,255,255,0.14); transform:translateY(-2px); box-shadow:0 8px 30px rgba(0,0,0,0.3); }

.rc-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:18px; }
.rc-title { font-size:14px; font-weight:600; }
.rc-badge { font-size:10px; padding:3px 10px; border-radius:10px; font-weight:500; }
.rc-badge.rf { background:rgba(74,127,255,0.12); color:var(--blue); }
.rc-badge.rv { background:rgba(201,168,76,0.12); color:var(--gold); }
.rc-badge.liq { background:rgba(0,201,167,0.12); color:var(--teal); }

.rc-instruments { display:flex; flex-direction:column; gap:10px; }

.rc-instrument { }
.rc-inst-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:5px; }
.rc-inst-name { font-size:12px; color:var(--text); font-weight:500; }
.rc-inst-val { font-size:13px; font-weight:600; }

.bar-track { height:6px; background:rgba(255,255,255,0.06); border-radius:3px; overflow:hidden; }
.bar-fill { height:100%; border-radius:3px; animation:barGrow 0.8s cubic-bezier(0.4,0,0.2,1) both; }

.rc-footnote { margin-top:18px; padding-top:14px; border-top:1px solid rgba(255,255,255,0.06); font-size:10px; color:var(--muted); line-height:1.6; }

.benchmark-row { display:flex; align-items:center; justify-content:center; gap:24px; flex-wrap:wrap; background:var(--dark2); border:1px solid rgba(255,255,255,0.07); border-radius:14px; padding:16px 28px; margin-bottom:28px; }
.bm-item { text-align:center; }
.bm-label { font-size:10px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-bottom:4px; }
.bm-val { font-size:18px; font-weight:600; }
.bm-sep { width:1px; height:32px; background:rgba(255,255,255,0.08); }

.disclaimer { text-align:center; font-size:11px; color:var(--muted); font-style:italic; padding:12px; background:rgba(255,255,255,0.02); border-radius:10px; border:1px solid rgba(255,255,255,0.05); }

/* ===== PERFIL TAB ===== */
.profiler-section { animation:fadeUp 0.5s ease both; }

.profiler-grid { display:grid; grid-template-columns:340px 1fr; gap:28px; align-items:start; }

.profiler-questions { background:var(--dark2); border:1.5px solid rgba(255,255,255,0.07); border-radius:20px; padding:28px; }
.profiler-questions h3 { font-size:13px; font-weight:600; letter-spacing:0.5px; margin-bottom:22px; color:var(--text); }

.q-block { margin-bottom:24px; }
.q-block:last-of-type { margin-bottom:0; }
.q-label { font-size:11px; font-weight:500; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-bottom:10px; }
.q-options { display:flex; flex-direction:column; gap:6px; }
.q-opt { padding:10px 14px; background:var(--dark3); border:1.5px solid rgba(255,255,255,0.06); border-radius:10px; font-size:12px; color:var(--muted); cursor:pointer; transition:all 0.2s; user-select:none; display:flex; align-items:center; gap:10px; }
.q-opt:hover { border-color:rgba(255,255,255,0.15); color:var(--text); }
.q-opt.selected { border-color:var(--gold); color:var(--gold); background:rgba(201,168,76,0.07); }
.q-opt-dot { width:8px; height:8px; border-radius:50%; border:1.5px solid currentColor; flex-shrink:0; transition:all 0.2s; }
.q-opt.selected .q-opt-dot { background:currentColor; }

.calc-btn { width:100%; margin-top:22px; padding:13px; background:linear-gradient(135deg,rgba(201,168,76,0.2),rgba(201,168,76,0.1)); border:1.5px solid rgba(201,168,76,0.4); border-radius:12px; font-family:'DM Sans',sans-serif; font-size:13px; font-weight:600; color:var(--gold); cursor:pointer; transition:all 0.25s; letter-spacing:0.5px; }
.calc-btn:hover { background:linear-gradient(135deg,rgba(201,168,76,0.3),rgba(201,168,76,0.15)); box-shadow:0 4px 20px rgba(201,168,76,0.2); }

/* Profile result panel */
.profile-result { background:var(--dark2); border:1.5px solid rgba(255,255,255,0.07); border-radius:20px; padding:28px; min-height:480px; display:flex; flex-direction:column; }
.profile-placeholder { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px; opacity:0.4; }
.profile-placeholder svg { opacity:0.4; }
.profile-placeholder p { font-size:13px; color:var(--muted); text-align:center; }

.profile-content { display:none; flex-direction:column; gap:20px; }
.profile-content.visible { display:flex; animation:fadeUp 0.5s ease both; }

.profile-header { display:flex; align-items:center; gap:16px; padding-bottom:18px; border-bottom:1px solid rgba(255,255,255,0.07); }
.profile-icon { width:56px; height:56px; border-radius:16px; display:flex; align-items:center; justify-content:center; font-size:28px; flex-shrink:0; }
.profile-name { font-family:'Playfair Display',serif; font-size:22px; font-weight:700; }
.profile-desc { font-size:12px; color:var(--muted); margin-top:3px; line-height:1.5; }

.alloc-chart { }
.alloc-chart-title { font-size:10px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:14px; }

.alloc-row { display:flex; align-items:center; gap:12px; margin-bottom:10px; }
.alloc-label { font-size:12px; width:130px; flex-shrink:0; }
.alloc-bar-wrap { flex:1; height:8px; background:rgba(255,255,255,0.06); border-radius:4px; overflow:hidden; }
.alloc-bar { height:100%; border-radius:4px; animation:barGrow 0.9s cubic-bezier(0.4,0,0.2,1) both; }
.alloc-pct { font-size:12px; font-weight:600; width:36px; text-align:right; flex-shrink:0; }

.recommended-instruments { }
.rec-title { font-size:10px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:12px; }
.rec-tags { display:flex; flex-wrap:wrap; gap:8px; }
.rec-tag { padding:5px 12px; border-radius:8px; font-size:11px; font-weight:500; border:1px solid; }

.risk-meter { }
.risk-meter-title { font-size:10px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:10px; }
.risk-track { height:8px; border-radius:4px; background:linear-gradient(90deg,var(--teal),var(--blue),var(--orange),var(--red)); position:relative; margin-bottom:6px; }
.risk-pointer { position:absolute; top:-4px; width:16px; height:16px; border-radius:50%; background:white; border:2px solid var(--dark); box-shadow:0 0 8px rgba(255,255,255,0.4); transform:translateX(-50%); transition:left 0.8s cubic-bezier(0.34,1.2,0.64,1); }
.risk-labels { display:flex; justify-content:space-between; font-size:9px; color:var(--muted); }

.horizon-info { display:flex; gap:12px; }
.h-info-item { flex:1; background:var(--dark3); border-radius:10px; padding:12px; text-align:center; }
.h-info-label { font-size:9px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; margin-bottom:6px; }
.h-info-val { font-size:14px; font-weight:600; }

/* ===== LEGEND & FOOTER ===== */
.legend { margin-top:48px; display:flex; gap:24px; flex-wrap:wrap; justify-content:center; animation:fadeUp 0.7s 0.8s ease both; }
.legend-item { display:flex; align-items:center; gap:8px; font-size:11px; color:var(--muted); }
.legend-dot { width:8px; height:8px; border-radius:50%; }
footer { margin-top:40px; font-size:10px; color:rgba(107,116,148,0.4); letter-spacing:1.5px; text-transform:uppercase; animation:fadeUp 0.7s 1s ease both; }

/* ===== BACK BTN ===== */

/* ===== BACK TO SPLASH BTN ===== */
#back-btn {
  position: fixed;
  top: 20px;
  left: 24px;
  z-index: 1000;
  display: none;
  align-items: center;
  gap: 7px;
  padding: 8px 16px 8px 12px;
  background: rgba(10,12,18,0.85);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(201,168,76,0.25);
  border-radius: 20px;
  font-family: 'DM Sans', sans-serif;
  font-size: 11px;
  font-weight: 500;
  color: rgba(201,168,76,0.8);
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.25s ease;
  animation: fadeUp 0.5s ease both;
}

#back-btn:hover {
  border-color: rgba(201,168,76,0.6);
  color: var(--gold-light);
  box-shadow: 0 4px 20px rgba(201,168,76,0.15);
  transform: translateX(-2px);
}

#back-btn svg {
  transition: transform 0.25s ease;
}

#back-btn:hover svg {
  transform: translateX(-3px);
}

/* ===== SPLASH SCREEN ===== */
#splash {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: #080A0F;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0;
  transition: opacity 0.8s ease, transform 0.8s ease;
}

#splash.hide {
  opacity: 0;
  pointer-events: none;
  transform: scale(1.04);
}

.splash-line {
  width: 60px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(201,168,76,0.6), transparent);
  margin: 20px 0;
  animation: lineExpand 1.2s 0.8s ease both;
}

@keyframes lineExpand {
  from { width: 0; opacity: 0; }
  to   { width: 60px; opacity: 1; }
}

.splash-eyebrow {
  font-size: 10px;
  font-weight: 500;
  letter-spacing: 6px;
  text-transform: uppercase;
  color: rgba(201,168,76,0.6);
  animation: fadeUp 0.8s 0.3s ease both;
  opacity: 0;
}

.splash-name {
  font-family: 'Playfair Display', serif;
  font-size: clamp(42px, 7vw, 80px);
  font-weight: 900;
  background: linear-gradient(135deg, #fff 0%, #E8C97A 45%, #C9A84C 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  line-height: 1.1;
  text-align: center;
  animation: fadeUp 0.9s 0.5s ease both;
  opacity: 0;
  letter-spacing: -1px;
}

.splash-title {
  font-size: 13px;
  color: rgba(226,228,238,0.45);
  font-weight: 300;
  letter-spacing: 2px;
  text-align: center;
  animation: fadeUp 0.8s 0.75s ease both;
  opacity: 0;
  margin-top: 6px;
}

.splash-enter-btn {
  margin-top: 40px;
  padding: 12px 36px;
  background: transparent;
  border: 1.5px solid rgba(201,168,76,0.45);
  border-radius: 30px;
  font-family: 'DM Sans', sans-serif;
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  color: rgba(201,168,76,0.85);
  cursor: pointer;
  transition: all 0.3s ease;
  animation: fadeUp 0.8s 1.2s ease both;
  opacity: 0;
  position: relative;
  overflow: hidden;
}

.splash-enter-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(201,168,76,0.08);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.3s ease;
}

.splash-enter-btn:hover {
  border-color: rgba(201,168,76,0.9);
  color: var(--gold-light);
  box-shadow: 0 0 24px rgba(201,168,76,0.2);
}

.splash-enter-btn:hover::before {
  transform: scaleX(1);
}

.splash-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.particle {
  position: absolute;
  width: 2px;
  height: 2px;
  border-radius: 50%;
  background: rgba(201,168,76,0.4);
  animation: float var(--dur) var(--delay) ease-in-out infinite alternate;
}

@keyframes float {
  from { transform: translate(0, 0) scale(1); opacity: 0.2; }
  to   { transform: translate(var(--tx), var(--ty)) scale(1.5); opacity: 0.7; }
}

.splash-logo {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  border: 1.5px solid rgba(201,168,76,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 24px;
  animation: fadeUp 0.8s 0.1s ease both, pulseGold 3s 1.5s ease-in-out infinite;
  opacity: 0;
  background: radial-gradient(circle at 35% 35%, #1E2535, #0F1219);
}

</style>
</head>
<body>

<div id="splash">
  <!-- Part√≠culas de fundo -->
  <div class="splash-particles" id="splash-particles"></div>

  <!-- Logo -->
  <div class="splash-logo">
    <svg width="34" height="34" viewBox="0 0 24 24" fill="none">
      <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="#C9A84C" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M2 17l10 5 10-5" stroke="#C9A84C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.6"/>
      <path d="M2 12l10 5 10-5" stroke="#C9A84C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.85"/>
    </svg>
  </div>

  <div class="splash-eyebrow">An√°lise de Investimentos ¬∑ P√≥s-Gradua√ß√£o</div>

  <div class="splash-line"></div>

  <div class="splash-name">Dr. Fernando<br>Ramos</div>

  <div class="splash-title">Material Did√°tico Interativo</div>

  <button class="splash-enter-btn" onclick="enterApp()">
    Acessar Conte√∫do &nbsp;‚Üí
  </button>
</div>

<button id="back-btn" onclick="goBack()">
  <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
    <path d="M9 2L4 7L9 12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  Capa
</button>

<header>
  <div class="eyebrow">An√°lise de Investimentos ¬∑ P√≥s-Gradua√ß√£o</div>
  <div style="font-size:13px;color:var(--gold-light);font-family:'Playfair Display',serif;font-style:italic;margin-bottom:6px;opacity:0.85;letter-spacing:0.5px;">Dr. Fernando Ramos</div>
  <h1>O Caminho do Dinheiro</h1>
  <p class="subtitle">Fluxo de capital do investidor aos ativos financeiros</p>
  <div class="hint"><div class="hint-dot"></div>Explore as tr√™s se√ß√µes abaixo</div>
</header>

<!-- TABS -->
<div class="tabs-wrap">
  <div class="tabs">
    <button class="tab-btn active" onclick="switchTab('flow')">
      <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 8h3l2-4 2 8 2-4h3"/></svg>
      Fluxo de Capital
    </button>
    <button class="tab-btn" onclick="switchTab('returns')">
      <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="10" width="2" height="4"/><rect x="6" y="6" width="2" height="8"/><rect x="10" y="3" width="2" height="11"/><rect x="14" y="7" width="2" height="7"/></svg>
      Comparativo de Rentabilidade
    </button>
    <button class="tab-btn" onclick="switchTab('profile')">
      <svg class="tab-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="8" cy="5" r="3"/><path d="M2 14c0-3 2.7-5 6-5s6 2 6 5"/></svg>
      Filtro por Perfil
    </button>
  </div>
</div>

<!-- ============================== TAB 1: FLOW ============================== -->
<div class="tab-panel active" id="tab-flow">
<div class="stage">
  <div class="investor-wrap">
    <div class="investor-ring">
      <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
        <circle cx="12" cy="8" r="3.5" stroke="#C9A84C" stroke-width="1.5"/>
        <path d="M4 20c0-3.8 3.6-7 8-7s8 3.2 8 7" stroke="#C9A84C" stroke-width="1.5" stroke-linecap="round"/>
        <circle cx="18" cy="14" r="4" fill="rgba(201,168,76,0.12)" stroke="#C9A84C" stroke-width="1.2"/>
        <text x="16.2" y="16.2" font-size="5.5" fill="#C9A84C" font-family="sans-serif" font-weight="bold">$</text>
      </svg>
    </div>
    <div class="investor-label">Investidor</div>
  </div>

  <div class="channels">
    <!-- ROW 1: BANCO -->
    <div class="channel-row">
      <div class="h-wire gold"></div>
      <div class="channel-card c-bank" id="card-bank" onclick="toggleChannel('bank')">
        <div class="tooltip">Clique para expandir</div>
        <div class="channel-badge" style="--badge-color:var(--teal);">‚úì</div>
        <div class="channel-icon" style="background:linear-gradient(135deg,#0D1A3A,#162A5A);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4A7FFF" stroke-width="1.8"><line x1="3" y1="22" x2="21" y2="22"/><line x1="6" y1="18" x2="6" y2="11"/><line x1="10" y1="18" x2="10" y2="11"/><line x1="14" y1="18" x2="14" y2="11"/><line x1="18" y1="18" x2="18" y2="11"/><polygon points="12 2 20 7 4 7" fill="rgba(74,127,255,0.15)"/></svg>
        </div>
        <div class="channel-name">Banco</div>
        <div class="channel-desc">Conta corrente &amp; aplica√ß√µes diretas</div>
        <div class="expand-indicator"><svg width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M2 3.5L5 6.5L8 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      </div>
      <div class="alloc-panel" id="panel-bank">
        <div class="alloc-inner">
          <div class="h-wire teal" style="width:40px;"></div>
          <div class="alloc-types">
            <div class="alloc-type savings" id="type-bank-cc" onclick="toggleInstruments('bank','cc')">
              <div class="alloc-type-title">Conta Corrente</div>
              <div class="alloc-type-sub">Dep√≥sito √† vista ¬∑ liquidez imediata</div>
              <span class="alloc-type-arrow">‚Ä∫</span>
            </div>
          </div>
          <div class="mini-wire" id="wire-bank-cc" style="--wc:rgba(0,201,167,0.5);display:none;"></div>
          <div class="instruments-wrap" id="instr-bank-cc">
            <div class="instruments-box">
              <div class="instruments-box-title savings">Caracter√≠sticas</div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--teal)"></div><div class="instrument-info"><div class="instrument-name">Dep√≥sito √† Vista</div><div class="instrument-detail">Sem rendimento ¬∑ liquidez D+0</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--teal)"></div><div class="instrument-info"><div class="instrument-name">Conta Remunerada</div><div class="instrument-detail">Rendimento atrelado ao CDI ¬∑ alguns bancos oferecem 100%+ CDI</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--teal)"></div><div class="instrument-info"><div class="instrument-name">Poupan√ßa</div><div class="instrument-detail">TR + 0,5% a.m. ou 70% da Selic ¬∑ isenta de IR</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--muted)"></div><div class="instrument-info"><div class="instrument-name">Garantia FGC</div><div class="instrument-detail">Cobertura de at√© R$250 mil por CPF por institui√ß√£o</div></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ROW 2: BANCO OU CORRETORA -->
    <div class="channel-row">
      <div class="h-wire gold"></div>
      <div class="channel-card c-broker" id="card-broker" onclick="toggleChannel('broker')">
        <div class="tooltip">Clique para expandir</div>
        <div class="channel-badge" style="--badge-color:var(--teal);">‚úì</div>
        <div class="channel-icon" style="background:linear-gradient(135deg,#082A22,#0D4035);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#00C9A7" stroke-width="1.8"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        </div>
        <div class="channel-name">Banco ou Corretora</div>
        <div class="channel-desc">Acesso direto ao mercado</div>
        <div class="expand-indicator"><svg width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M2 3.5L5 6.5L8 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      </div>
      <div class="alloc-panel" id="panel-broker">
        <div class="alloc-inner">
          <div class="h-wire blue" style="width:40px;"></div>
          <div class="alloc-types">
            <div class="alloc-type debt" id="type-broker-debt" onclick="toggleInstruments('broker','debt')"><div class="alloc-type-title">T√≠tulo de D√≠vida</div><div class="alloc-type-sub">Renda fixa ¬∑ credor do emissor</div><span class="alloc-type-arrow">‚Ä∫</span></div>
            <div class="alloc-type equity" id="type-broker-equity" onclick="toggleInstruments('broker','equity')"><div class="alloc-type-title">A√ß√µes</div><div class="alloc-type-sub">Renda vari√°vel ¬∑ participa√ß√£o societ√°ria</div><span class="alloc-type-arrow">‚Ä∫</span></div>
          </div>
          <div class="mini-wire" id="wire-broker-debt" style="--wc:rgba(74,127,255,0.5);display:none;"></div>
          <div class="instruments-wrap" id="instr-broker-debt">
            <div class="instruments-box">
              <div class="instruments-box-title debt">Instrumentos ¬∑ Renda Fixa</div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--blue)"></div><div class="instrument-info"><div class="instrument-name">CDB</div><div class="instrument-detail">Certificado de Dep√≥sito Banc√°rio ¬∑ % CDI ou IPCA+ ¬∑ IR regressivo</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--blue)"></div><div class="instrument-info"><div class="instrument-name">LCA / LCI</div><div class="instrument-detail">Letra de Cr√©dito ¬∑ isenta de IR para PF ¬∑ agro e im√≥veis</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--blue)"></div><div class="instrument-info"><div class="instrument-name">LF (Letra Financeira)</div><div class="instrument-detail">M√≠n. R$50 mil ¬∑ prazo ‚â• 2 anos ¬∑ sem FGC</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">Deb√™ntures</div><div class="instrument-detail">D√≠vida corporativa ¬∑ incentivadas (isentas IR) ou comuns</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--muted)"></div><div class="instrument-info"><div class="instrument-name">T√≠tulos P√∫blicos</div><div class="instrument-detail">Tesouro Direto ¬∑ Selic, IPCA+, Prefixado</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--muted)"></div><div class="instrument-info"><div class="instrument-name">CRI / CRA</div><div class="instrument-detail">Certificados de Receb√≠veis ¬∑ isentos IR ¬∑ sem FGC</div></div></div>
            </div>
          </div>
          <div class="mini-wire" id="wire-broker-equity" style="--wc:rgba(201,168,76,0.5);display:none;"></div>
          <div class="instruments-wrap" id="instr-broker-equity">
            <div class="instruments-box">
              <div class="instruments-box-title equity">Instrumentos ¬∑ Renda Vari√°vel</div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">A√ß√µes ON / PN</div><div class="instrument-detail">Ordin√°rias (voto) e Preferenciais (dividendo) ¬∑ B3</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">BDRs</div><div class="instrument-detail">Brazilian Depositary Receipts ¬∑ a√ß√µes internacionais na B3</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">ETFs</div><div class="instrument-detail">Exchange Traded Funds ¬∑ gest√£o passiva de √≠ndices</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">FIIs</div><div class="instrument-detail">Fundos Imobili√°rios ¬∑ renda mensal ¬∑ isen√ß√£o IR nos dividendos</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--muted)"></div><div class="instrument-info"><div class="instrument-name">Op√ß√µes / Derivativos</div><div class="instrument-detail">Calls, Puts ¬∑ hedge e alavancagem ¬∑ alto risco</div></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ROW 3: FUNDO -->
    <div class="channel-row">
      <div class="h-wire gold"></div>
      <div class="channel-card c-fund" id="card-fund" onclick="toggleChannel('fund')">
        <div class="tooltip">Clique para expandir</div>
        <div class="channel-badge" style="--badge-color:var(--teal);">‚úì</div>
        <div class="channel-icon" style="background:linear-gradient(135deg,#2A1E00,#4A3800);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#C9A84C" stroke-width="1.8"><circle cx="12" cy="12" r="9"/><path d="M12 8v4l3 3"/><line x1="3.6" y1="9" x2="20.4" y2="9"/><line x1="3.6" y1="15" x2="20.4" y2="15"/></svg>
        </div>
        <div class="channel-name">Fundo de Investimento</div>
        <div class="channel-desc">Gest√£o coletiva ¬∑ cotistas e gestores</div>
        <div class="expand-indicator"><svg width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M2 3.5L5 6.5L8 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
      </div>
      <div class="alloc-panel" id="panel-fund">
        <div class="alloc-inner">
          <div class="h-wire gold" style="width:40px;"></div>
          <div class="alloc-types">
            <div class="alloc-type debt" id="type-fund-debt" onclick="toggleInstruments('fund','debt')"><div class="alloc-type-title">T√≠tulo de D√≠vida</div><div class="alloc-type-sub">Renda fixa ¬∑ gest√£o ativa/passiva</div><span class="alloc-type-arrow">‚Ä∫</span></div>
            <div class="alloc-type equity" id="type-fund-equity" onclick="toggleInstruments('fund','equity')"><div class="alloc-type-title">A√ß√µes</div><div class="alloc-type-sub">Fundos de a√ß√µes ¬∑ long-short ¬∑ FIAs</div><span class="alloc-type-arrow">‚Ä∫</span></div>
          </div>
          <div class="mini-wire" id="wire-fund-debt" style="--wc:rgba(74,127,255,0.5);display:none;"></div>
          <div class="instruments-wrap" id="instr-fund-debt">
            <div class="instruments-box">
              <div class="instruments-box-title debt">Tipos de Fundos ¬∑ Renda Fixa</div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--blue)"></div><div class="instrument-info"><div class="instrument-name">Fundos DI</div><div class="instrument-detail">Atrelados ao CDI ¬∑ baix√≠ssimo risco ¬∑ alta liquidez</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--blue)"></div><div class="instrument-info"><div class="instrument-name">Fundos de Renda Fixa</div><div class="instrument-detail">CDBs, LCIs, Deb√™ntures, T. P√∫blicos ¬∑ gest√£o ativa</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--blue)"></div><div class="instrument-info"><div class="instrument-name">Fundos de Cr√©dito Privado</div><div class="instrument-detail">Deb√™ntures e CRIs ¬∑ maior risco-retorno ¬∑ come-cotas</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">Fundos Multimercado</div><div class="instrument-detail">Renda fixa + vari√°vel + c√¢mbio ¬∑ macro global</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--muted)"></div><div class="instrument-info"><div class="instrument-name">Come-cotas</div><div class="instrument-detail">Antecipa√ß√£o de IR em maio e nov ¬∑ impacto no retorno</div></div></div>
            </div>
          </div>
          <div class="mini-wire" id="wire-fund-equity" style="--wc:rgba(201,168,76,0.5);display:none;"></div>
          <div class="instruments-wrap" id="instr-fund-equity">
            <div class="instruments-box">
              <div class="instruments-box-title equity">Tipos de Fundos ¬∑ A√ß√µes</div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">FIA (Fundo de A√ß√µes)</div><div class="instrument-detail">M√≠n. 67% em a√ß√µes ¬∑ IRPF 15% no resgate</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">Long &amp; Short</div><div class="instrument-detail">Posi√ß√µes compradas e vendidas ¬∑ neutro ao mercado</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">FIIs</div><div class="instrument-detail">Tijolo, papel e h√≠bridos ¬∑ dividendos mensais</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--gold)"></div><div class="instrument-info"><div class="instrument-name">FIP</div><div class="instrument-detail">Private equity ¬∑ investidores qualificados</div></div></div>
              <div class="instrument-item"><div class="instrument-dot" style="background:var(--muted)"></div><div class="instrument-info"><div class="instrument-name">ETFs de A√ß√µes</div><div class="instrument-detail">BOVA11, IVVB11 ¬∑ gest√£o passiva de √≠ndices</div></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<button class="reset-btn" onclick="resetAll()">‚Ü∫ &nbsp;Reiniciar diagrama</button>
<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:var(--blue)"></div>Renda Fixa</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--gold)"></div>Renda Vari√°vel</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--teal)"></div>Disponibilidade Imediata</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--muted)"></div>Outros / H√≠brido</div>
</div>
</div>

<!-- ============================== TAB 2: RETURNS ============================== -->
<div class="tab-panel" id="tab-returns">
<div class="returns-section">
  <div class="section-intro">
    <h2>Comparativo de Rentabilidade</h2>
    <p>Retornos estimados por cen√°rio macroecon√¥mico ¬∑ base anual ¬∑ valores ilustrativos para fins did√°ticos</p>
  </div>

  <div style="text-align:center;margin-bottom:10px;">
    <span id="bm-date-tag" style="font-size:10px;color:var(--muted);letter-spacing:0.5px;">Consultando Banco Central do Brasil‚Ä¶</span>
  </div>
  <div class="benchmark-row" id="benchmark-row">
    <div class="bm-item"><div class="bm-label">Selic</div><div class="bm-val" id="bm-selic" style="color:var(--teal)">‚Äî</div></div>
    <div class="bm-sep"></div>
    <div class="bm-item"><div class="bm-label">CDI</div><div class="bm-val" id="bm-cdi" style="color:var(--blue)">‚Äî</div></div>
    <div class="bm-sep"></div>
    <div class="bm-item"><div class="bm-label">IPCA</div><div class="bm-val" id="bm-ipca" style="color:var(--orange)">‚Äî</div></div>
    <div class="bm-sep"></div>
    <div class="bm-item"><div class="bm-label">Ibovespa</div><div class="bm-val" id="bm-ibov" style="color:var(--gold)">‚Äî</div></div>
  </div>

  <div class="scenario-controls">
    <button class="scenario-btn active" onclick="setScenario('alto',this)">üî• Juro Alto</button>
    <button class="scenario-btn" onclick="setScenario('queda',this)">üìâ Queda de Juros</button>
    <button class="scenario-btn" onclick="setScenario('inflacao',this)">‚ö° Alta Infla√ß√£o</button>
    <button class="scenario-btn" onclick="setScenario('expansao',this)">üöÄ Expans√£o Econ√¥mica</button>
  </div>

  <div class="returns-grid" id="returns-grid"></div>
  <div class="disclaimer">‚ö†Ô∏è Rentabilidades passadas n√£o garantem resultados futuros. Valores meramente ilustrativos para fins pedag√≥gicos.</div>
</div>
</div>

<!-- ============================== TAB 3: PROFILE ============================== -->
<div class="tab-panel" id="tab-profile">
<div class="profiler-section">
  <div class="section-intro" style="margin-bottom:32px;">
    <h2>Filtro por Perfil de Investidor</h2>
    <p>Responda √†s perguntas para descobrir quais instrumentos se adequam ao seu perfil</p>
  </div>

  <div class="profiler-grid">
    <!-- Questions -->
    <div class="profiler-questions">
      <h3>üìã Question√°rio de Suitability</h3>

      <div class="q-block">
        <div class="q-label">Horizonte de Investimento</div>
        <div class="q-options">
          <div class="q-opt" onclick="selectOption(this,'horizon','curto')" data-q="horizon" data-v="curto"><div class="q-opt-dot"></div>Curto prazo (at√© 1 ano)</div>
          <div class="q-opt" onclick="selectOption(this,'horizon','medio')" data-q="horizon" data-v="medio"><div class="q-opt-dot"></div>M√©dio prazo (1 a 5 anos)</div>
          <div class="q-opt" onclick="selectOption(this,'horizon','longo')" data-q="horizon" data-v="longo"><div class="q-opt-dot"></div>Longo prazo (mais de 5 anos)</div>
        </div>
      </div>

      <div class="q-block">
        <div class="q-label">Toler√¢ncia a Perdas</div>
        <div class="q-options">
          <div class="q-opt" onclick="selectOption(this,'loss','nenhuma')" data-q="loss" data-v="nenhuma"><div class="q-opt-dot"></div>N√£o aceito nenhuma perda</div>
          <div class="q-opt" onclick="selectOption(this,'loss','pequena')" data-q="loss" data-v="pequena"><div class="q-opt-dot"></div>Aceito perdas de at√© 10%</div>
          <div class="q-opt" onclick="selectOption(this,'loss','alta')" data-q="loss" data-v="alta"><div class="q-opt-dot"></div>Aceito perdas acima de 20% por retornos maiores</div>
        </div>
      </div>

      <div class="q-block">
        <div class="q-label">Objetivo Principal</div>
        <div class="q-options">
          <div class="q-opt" onclick="selectOption(this,'goal','preservar')" data-q="goal" data-v="preservar"><div class="q-opt-dot"></div>Preservar o capital</div>
          <div class="q-opt" onclick="selectOption(this,'goal','renda')" data-q="goal" data-v="renda"><div class="q-opt-dot"></div>Gerar renda passiva</div>
          <div class="q-opt" onclick="selectOption(this,'goal','crescer')" data-q="goal" data-v="crescer"><div class="q-opt-dot"></div>Crescer o patrim√¥nio</div>
        </div>
      </div>

      <div class="q-block">
        <div class="q-label">Experi√™ncia com Investimentos</div>
        <div class="q-options">
          <div class="q-opt" onclick="selectOption(this,'exp','iniciante')" data-q="exp" data-v="iniciante"><div class="q-opt-dot"></div>Iniciante ¬∑ s√≥ tenho poupan√ßa</div>
          <div class="q-opt" onclick="selectOption(this,'exp','intermediario')" data-q="exp" data-v="intermediario"><div class="q-opt-dot"></div>Intermedi√°rio ¬∑ CDBs e Tesouro</div>
          <div class="q-opt" onclick="selectOption(this,'exp','avancado')" data-q="exp" data-v="avancado"><div class="q-opt-dot"></div>Avan√ßado ¬∑ a√ß√µes e derivativos</div>
        </div>
      </div>

      <button class="calc-btn" onclick="calcProfile()">Calcular meu perfil ‚Üí</button>
    </div>

    <!-- Result -->
    <div class="profile-result">
      <div class="profile-placeholder" id="profile-placeholder">
        <svg width="64" height="64" viewBox="0 0 64 64" fill="none"><circle cx="32" cy="24" r="12" stroke="#6B7494" stroke-width="2"/><path d="M10 56c0-12 9.8-20 22-20s22 8 22 20" stroke="#6B7494" stroke-width="2" stroke-linecap="round"/></svg>
        <p>Responda as perguntas ao lado<br>e clique em <strong style="color:var(--text)">Calcular meu perfil</strong></p>
      </div>
      <div class="profile-content" id="profile-content">
        <!-- populated by JS -->
      </div>
    </div>
  </div>
</div>
</div>

<footer style="text-align:center;line-height:2;">
  <div>An√°lise de Investimentos ¬∑ P√≥s-Gradua√ß√£o</div>
  <div style="margin-top:4px;font-size:10px;color:rgba(201,168,76,0.35);letter-spacing:1px;">¬© 2025 Dr. Fernando Ramos ¬∑ Todos os direitos reservados ¬∑ Reprodu√ß√£o proibida sem autoriza√ß√£o</div>
</footer>

<script>
/* ===== TAB LOGIC ===== */
function switchTab(id) {
  document.querySelectorAll('.tab-btn').forEach((b,i) => b.classList.toggle('active', ['flow','returns','profile'][i] === id));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
  if(id === 'returns' && !currentScenario) setScenario('alto');
  else if(id === 'returns' && currentScenario) renderReturns(currentScenario);
  if(id === 'returns') loadLiveIndicators();
}

/* ===== FLOW DIAGRAM LOGIC ===== */
const state = { bank:{open:false,instruments:null}, broker:{open:false,instruments:null}, fund:{open:false,instruments:null} };

function toggleChannel(channel) {
  const card = document.getElementById('card-'+channel);
  const panel = document.getElementById('panel-'+channel);
  const isOpen = state[channel].open;
  if(isOpen) { panel.classList.remove('open'); card.classList.remove('active'); state[channel].open=false; closeAllInstruments(channel); state[channel].instruments=null; }
  else { panel.classList.add('open'); card.classList.add('active'); state[channel].open=true; }
}

function toggleInstruments(channel, type) {
  const current = state[channel].instruments;
  if(current && current !== type) closeInstruments(channel, current);
  if(current === type) { closeInstruments(channel, type); state[channel].instruments=null; }
  else {
    const typeEl = document.getElementById('type-'+channel+'-'+type);
    const instrEl = document.getElementById('instr-'+channel+'-'+type);
    const wireEl = document.getElementById('wire-'+channel+'-'+type);
    typeEl.classList.add('open'); instrEl.classList.add('show');
    if(wireEl) wireEl.style.display='block';
    instrEl.querySelectorAll('.instrument-item').forEach((item,i) => { item.style.animation='none'; item.offsetHeight; item.style.animation=''; item.style.animationDelay=`${0.05+i*0.06}s`; });
    state[channel].instruments=type;
  }
}

function closeInstruments(channel, type) {
  const t = document.getElementById('type-'+channel+'-'+type);
  const i = document.getElementById('instr-'+channel+'-'+type);
  const w = document.getElementById('wire-'+channel+'-'+type);
  if(t) t.classList.remove('open'); if(i) i.classList.remove('show'); if(w) w.style.display='none';
}

function closeAllInstruments(channel) {
  ['debt','equity','savings','cc'].forEach(type => closeInstruments(channel, type));
}

function resetAll() {
  ['bank','broker','fund'].forEach(ch => {
    if(state[ch].open) {
      document.getElementById('panel-'+ch).classList.remove('open');
      document.getElementById('card-'+ch).classList.remove('active');
      closeAllInstruments(ch); state[ch].open=false; state[ch].instruments=null;
    }
  });
}

/* ===== RETURNS LOGIC ===== */
const scenarios = {
  alto: {
    // Selic: 14,90% | CDI: 15,00% | IPCA: 4,40% ‚Äî valores reais fev/2025
    label: 'Cen√°rio Atual', selic:'14,90%', cdi:'15,00%', ipca:'4,40%', ibov:'+8%',
    cards: [
      { title:'Renda Fixa P√≥s-fixada', badge:'rf', instruments:[
        {name:'Tesouro Selic',       val:'14,90%', pct:99,  color:'var(--blue)'},
        {name:'CDB 100% CDI',        val:'15,00%', pct:100, color:'var(--blue)'},
        {name:'LCA / LCI  95% CDI',  val:'14,25%', pct:95,  color:'var(--blue)'},
        {name:'Poupan√ßa',            val:'10,43%', pct:69,  color:'var(--muted)'},
      ],
        note:'‚úÖ CDI a 15,00% entrega retorno real de ~10,2% a.a. (descontado IPCA de 4,4%). Melhor momento para renda fixa p√≥s-fixada.'
      },
      { title:'Renda Fixa Prefixada / IPCA+', badge:'rf', instruments:[
        {name:'Tesouro Prefixado 2027', val:'14,50%',     pct:97, color:'var(--blue)'},
        {name:'CDB Prefixado 2 anos',   val:'14,10%',     pct:94, color:'var(--blue)'},
        {name:'Tesouro IPCA+ 2029',     val:'IPCA+6,8%',  pct:74, color:'var(--teal)'},
        {name:'Deb√™nture incentivada',  val:'IPCA+6,2%',  pct:70, color:'var(--teal)'},
      ],
        note:'‚ö†Ô∏è Prefixado trava a taxa atual, mas sofre marca√ß√£o a mercado. IPCA+ garante retorno real de ~6,8% a.a. ‚Äî atrativo para longo prazo.'
      },
      { title:'Renda Vari√°vel', badge:'rv', instruments:[
        {name:'Ibovespa (12m)',        val:'+8%',   pct:53, color:'var(--gold)'},
        {name:'FIIs (dividend yield)', val:'10,5%', pct:70, color:'var(--gold)'},
        {name:'BDRs S&P500 (BRL)',     val:'+12%',  pct:80, color:'var(--gold)'},
      ],
        note:'‚ö†Ô∏è Com CDI a 15%, o custo de oportunidade para renda vari√°vel √© elevado. Ibovespa precisa superar 15% para justificar o risco.'
      },
    ]
  },
  queda: {
    label:'Queda de Juros', selic:'10,0%', cdi:'9,9%', ipca:'4,0%', ibov:'+22%',
    cards: [
      { title:'Renda Fixa P√≥s-fixada', badge:'rf', instruments:[
        {name:'Tesouro Selic',val:'9,9%',pct:45,color:'var(--blue)'},{name:'CDB 100% CDI',val:'9,9%',pct:45,color:'var(--blue)'},{name:'LCA/LCI 95% CDI',val:'9,4%',pct:43,color:'var(--blue)'},{name:'Poupan√ßa',val:'7,0%',pct:32,color:'var(--muted)'}],
        note:'üìâ Com queda de juros, retorno absoluto cai mas ainda seguro. Melhor realocar para prefixado ou vari√°vel.'
      },
      { title:'Renda Fixa Prefixada', badge:'rf', instruments:[
        {name:'Tesouro IPCA+ 2035',val:'IPCA+6,5%',pct:88,color:'var(--teal)'},{name:'CDB Prefixado 3 anos',val:'11,0%',pct:70,color:'var(--blue)'},{name:'Deb√™nture incentivada',val:'IPCA+6,0%',pct:82,color:'var(--teal)'}],
        note:'‚úÖ √ìtimo momento para travar taxas altas via prefixado ou IPCA+ antes da queda se consolidar.'
      },
      { title:'Renda Vari√°vel', badge:'rv', instruments:[
        {name:'Ibovespa (estimado)',val:'+22%',pct:100,color:'var(--gold)'},{name:'FIIs',val:'+18%',pct:82,color:'var(--gold)'},{name:'Small Caps',val:'+28%',pct:100,color:'var(--gold)'}],
        note:'üöÄ Principal benefici√°ria da queda de juros. Valuations se expandem e custo de capital cai.'
      },
    ]
  },
  inflacao: {
    label:'Alta Infla√ß√£o', selic:'16,0%', cdi:'15,9%', ipca:'9,5%', ibov:'-5%',
    cards: [
      { title:'Prote√ß√£o √† Infla√ß√£o', badge:'rf', instruments:[
        {name:'Tesouro IPCA+ 2029',val:'IPCA+7,0% = 16,5%',pct:100,color:'var(--orange)'},{name:'LCI IPCA+ (isento IR)',val:'IPCA+5,5%',pct:88,color:'var(--orange)'},{name:'Deb√™nture incentivada IPCA+',val:'IPCA+6,2%',pct:93,color:'var(--orange)'}],
        note:'üõ°Ô∏è Indexados ao IPCA s√£o a melhor prote√ß√£o. Garantem retorno real positivo independente da infla√ß√£o.'
      },
      { title:'Renda Fixa P√≥s-fixada', badge:'rf', instruments:[
        {name:'CDB 100% CDI',val:'15,9%',pct:100,color:'var(--blue)'},{name:'Tesouro Selic',val:'16,0%',pct:100,color:'var(--blue)'},{name:'Fundos DI',val:'15,5%',pct:97,color:'var(--blue)'}],
        note:'‚úÖ Selic sobe junto com infla√ß√£o. P√≥s-fixado entrega retorno nominal alto, mas aten√ß√£o ao retorno real.'
      },
      { title:'Renda Vari√°vel', badge:'rv', instruments:[
        {name:'Ibovespa (estimado)',val:'-5%',pct:10,color:'var(--red)'},{name:'FIIs (tijolo)',val:'-8%',pct:5,color:'var(--red)'},{name:'A√ß√µes defensivas',val:'+3%',pct:25,color:'var(--gold)'}],
        note:'üî¥ Alta infla√ß√£o corr√≥i margens e comprime m√∫ltiplos. Evitar exposi√ß√£o excessiva em a√ß√µes.'
      },
    ]
  },
  expansao: {
    label:'Expans√£o Econ√¥mica', selic:'11,5%', cdi:'11,4%', ipca:'3,5%', ibov:'+30%',
    cards: [
      { title:'Renda Vari√°vel', badge:'rv', instruments:[
        {name:'Ibovespa (estimado)',val:'+30%',pct:100,color:'var(--gold)'},{name:'Small Caps',val:'+40%',pct:100,color:'var(--gold)'},{name:'FIIs',val:'+22%',pct:73,color:'var(--gold)'},{name:'BDRs',val:'+18%',pct:60,color:'var(--gold)'}],
        note:'üöÄ Expans√£o favorece a√ß√µes. Lucros crescem, desemprego cai, confian√ßa do consumidor aumenta.'
      },
      { title:'Renda Fixa Curto Prazo', badge:'rf', instruments:[
        {name:'Tesouro Selic',val:'11,4%',pct:38,color:'var(--blue)'},{name:'CDB P√≥s-fixado',val:'11,4%',pct:38,color:'var(--blue)'},{name:'LCA/LCI (isento)',val:'10,8%',pct:36,color:'var(--blue)'}],
        note:'üìä Manter reserva de emerg√™ncia em p√≥s-fixado. Boa rela√ß√£o risco-retorno para liquidez.'
      },
      { title:'Multimercado e Fundos', badge:'rv', instruments:[
        {name:'Fundo Multimercado',val:'+18%',pct:60,color:'var(--purple)'},{name:'FIP / Private Equity',val:'+35%',pct:100,color:'var(--purple)'},{name:'Long & Short',val:'+14%',pct:47,color:'var(--purple)'}],
        note:'‚úÖ Expans√£o cria oportunidades em private equity e multimercado com exposi√ß√£o a ciclos.'
      },
    ]
  }
};

let currentScenario = null;

// ===== API BANCO CENTRAL DO BRASIL =====
// SGS codes: 432=Selic meta %a.a, 12=CDI di√°rio, 433=IPCA mensal, 7=Ibovespa mensal
const liveIndicators = { selic: null, cdi: null, ipca: null, ibov: null };

function parseVal(str) { return parseFloat(String(str).replace(',','.')); }
function fmtPct(val, forceSign=true) {
  if (val === null || isNaN(val)) return '‚Äî';
  const sign = forceSign && val >= 0 ? '+' : '';
  return `${sign}${val.toFixed(2).replace('.',',')}%`;
}

// Tenta buscar uma s√©rie SGS via m√∫ltiplos proxies CORS em cascata
async function fetchSerie(codigo, n) {
  const bcbUrl = `https://api.bcb.gov.br/dados/serie/bcdata.sgs.${codigo}/dados/ultimos/${n}?formato=json`;

  // Lista de estrat√©gias: direto + 3 proxies diferentes
  const strategies = [
    // 1. Direto (funciona se o browser n√£o bloquear CORS ‚Äî alguns ambientes permitem)
    async () => {
      const r = await fetch(bcbUrl, { signal: AbortSignal.timeout(5000) });
      if (!r.ok) throw new Error('direct fail');
      return r.json();
    },
    // 2. corsproxy.io
    async () => {
      const r = await fetch(`https://corsproxy.io/?${encodeURIComponent(bcbUrl)}`, { signal: AbortSignal.timeout(7000) });
      if (!r.ok) throw new Error('corsproxy fail');
      return r.json();
    },
    // 3. allorigins (wrapper diferente ‚Äî retorna {contents: "..."})
    async () => {
      const r = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(bcbUrl)}`, { signal: AbortSignal.timeout(7000) });
      if (!r.ok) throw new Error('allorigins fail');
      const w = await r.json();
      return JSON.parse(w.contents);
    },
    // 4. thingproxy
    async () => {
      const r = await fetch(`https://thingproxy.freeboard.io/fetch/${bcbUrl}`, { signal: AbortSignal.timeout(7000) });
      if (!r.ok) throw new Error('thingproxy fail');
      return r.json();
    },
  ];

  for (const attempt of strategies) {
    try {
      const data = await attempt();
      if (Array.isArray(data) && data.length > 0) return data;
    } catch (_) { /* tenta o pr√≥ximo */ }
  }
  throw new Error('Todos os proxies falharam');
}

async function loadLiveIndicators() {
  const ids = ['bm-selic','bm-cdi','bm-ipca','bm-ibov'];
  ids.forEach(id => {
    const e = document.getElementById(id);
    if(e) e.innerHTML = '<span style="font-size:11px;opacity:0.35;animation:blink 1s infinite">‚óè</span>';
  });
  const tag = document.getElementById('bm-date-tag');
  if(tag) tag.textContent = 'Consultando Banco Central do Brasil‚Ä¶';

  try {
    // Busca em paralelo para ser mais r√°pido
    const [selicRaw, cdiRaw, ipcaRaw, ibovRaw] = await Promise.all([
      fetchSerie(432, 1),    // Selic meta
      fetchSerie(12, 252),   // CDI di√°rio ~1 ano √∫til
      fetchSerie(433, 12),   // IPCA mensal 12 meses
      fetchSerie(7, 13),     // Ibovespa mensal 13 meses
    ]);

    liveIndicators.selic = parseVal(selicRaw[0].valor);

    const cdiAcum = cdiRaw.reduce((acc, d) => acc * (1 + parseVal(d.valor) / 100), 1);
    liveIndicators.cdi = (cdiAcum - 1) * 100;

    const ipcaAcum = ipcaRaw.reduce((acc, d) => acc * (1 + parseVal(d.valor) / 100), 1);
    liveIndicators.ipca = (ipcaAcum - 1) * 100;

    const ibovIni = parseVal(ibovRaw[0].valor);
    const ibovFim = parseVal(ibovRaw[ibovRaw.length - 1].valor);
    liveIndicators.ibov = (ibovFim / ibovIni - 1) * 100;

    // Atualizar display
    document.getElementById('bm-selic').textContent = fmtPct(liveIndicators.selic, false);
    document.getElementById('bm-cdi').textContent   = fmtPct(liveIndicators.cdi, false);
    document.getElementById('bm-ipca').textContent  = fmtPct(liveIndicators.ipca, false);
    document.getElementById('bm-ibov').textContent  = fmtPct(liveIndicators.ibov);

    if(tag) {
      tag.innerHTML = `<span style="color:var(--teal)">‚óè</span> Dados ao vivo ¬∑ Banco Central do Brasil ¬∑ ${new Date().toLocaleDateString('pt-BR')}`;
    }

    if(currentScenario === 'alto') {
      injectLiveIntoScenario();
      renderReturns('alto');
    }

  } catch(e) {
    console.warn('API BCB indispon√≠vel:', e.message);
    if(tag) {
      tag.innerHTML = `<span style="color:var(--orange)">‚ö†</span> N√£o foi poss√≠vel conectar ao Banco Central ‚Äî exibindo valores ilustrativos`;
    }
    ids.forEach(id => {
      const el = document.getElementById(id);
      if(el) el.style.opacity = '0.6';
    });
    if(currentScenario) {
      const s = scenarios[currentScenario];
      document.getElementById('bm-selic').textContent = s.selic;
      document.getElementById('bm-cdi').textContent   = s.cdi;
      document.getElementById('bm-ipca').textContent  = s.ipca;
      document.getElementById('bm-ibov').textContent  = s.ibov;
    }
  }
}

function injectLiveIntoScenario() {
  const { selic, cdi, ipca } = liveIndicators;
  const s = scenarios['alto'];
  // Benchmarks
  s.selic = fmtPct(selic, false);
  s.cdi   = fmtPct(cdi, false);
  s.ipca  = fmtPct(ipca, false);
  s.ibov  = fmtPct(liveIndicators.ibov);
  // Recalcular instrumentos p√≥s-fixados com base no CDI real
  const pct = (v) => Math.min(100, Math.round(v / selic * 100));
  s.cards[0].instruments = [
    {name:'Tesouro Selic',       val: fmtPct(selic * 0.998, false), pct: pct(selic * 0.998), color:'var(--blue)'},
    {name:'CDB 100% CDI',        val: fmtPct(cdi, false),           pct: pct(cdi),            color:'var(--blue)'},
    {name:'LCA/LCI 95% CDI',     val: fmtPct(cdi * 0.95, false),   pct: pct(cdi * 0.95),     color:'var(--blue)'},
    {name:'Poupan√ßa',            val: fmtPct(Math.min(selic * 0.7, 8.5), false), pct: pct(Math.min(selic * 0.7, 8.5)), color:'var(--muted)'},
  ];
  s.cards[1].instruments[0].val = fmtPct(selic * 0.97, false);
  s.cards[1].instruments[1].val = fmtPct(selic * 0.94, false);
  s.cards[1].instruments[2].val = `IPCA+${fmtPct(selic - ipca - 1, false)}`;
}

function setScenario(key, el) {
  currentScenario = key;
  document.querySelectorAll('.scenario-btn').forEach(b => b.classList.remove('active'));
  if(el) el.classList.add('active');
  else document.querySelector(`.scenario-btn[onclick*="'${key}'"]`)?.classList.add('active');
  // Se dados reais dispon√≠veis e cen√°rio atual selecionado, injeta-os
  if(liveIndicators.selic && key === 'alto') injectLiveIntoScenario();
  renderReturns(key);
  // Mant√©m benchmarks ao vivo no topo mesmo ao trocar cen√°rio
  if(liveIndicators.selic) {
    document.getElementById('bm-selic').textContent = fmtPct(liveIndicators.selic, false);
    document.getElementById('bm-cdi').textContent   = fmtPct(liveIndicators.cdi, false);
    document.getElementById('bm-ipca').textContent  = fmtPct(liveIndicators.ipca, false);
    document.getElementById('bm-ibov').textContent  = fmtPct(liveIndicators.ibov);
  }
}

function renderReturns(key) {
  const s = scenarios[key];
  if(!liveIndicators.selic) {
    document.getElementById('bm-selic').textContent = s.selic;
    document.getElementById('bm-cdi').textContent   = s.cdi;
    document.getElementById('bm-ipca').textContent  = s.ipca;
    document.getElementById('bm-ibov').textContent  = s.ibov;
  }

  const grid = document.getElementById('returns-grid');
  grid.innerHTML = '';
  s.cards.forEach((card, ci) => {
    const el = document.createElement('div');
    el.className = 'return-card';
    el.style.animationDelay = `${ci * 0.1}s`;
    el.style.animation = 'fadeUp 0.5s ease both';
    const badgeClass = card.badge;
    const badgeLabel = card.badge === 'rf' ? 'Renda Fixa' : card.badge === 'rv' ? 'Renda Vari√°vel' : 'Liquidez';
    let insHtml = card.instruments.map((ins, ii) => `
      <div class="rc-instrument">
        <div class="rc-inst-header">
          <span class="rc-inst-name">${ins.name}</span>
          <span class="rc-inst-val" style="color:${ins.color}">${ins.val}</span>
        </div>
        <div class="bar-track">
          <div class="bar-fill" style="--bar-w:${ins.pct}%;background:${ins.color};animation-delay:${0.2 + ii*0.08}s;"></div>
        </div>
      </div>`).join('');
    el.innerHTML = `
      <div class="rc-header">
        <span class="rc-title">${card.title}</span>
        <span class="rc-badge ${badgeClass}">${badgeLabel}</span>
      </div>
      <div class="rc-instruments">${insHtml}</div>
      <div class="rc-footnote">${card.note}</div>`;
    grid.appendChild(el);
  });
}

/* ===== PROFILE LOGIC ===== */
const answers = {};

function selectOption(el, question, value) {
  document.querySelectorAll(`[data-q="${question}"]`).forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
  answers[question] = value;
}

function calcProfile() {
  const { horizon, loss, goal, exp } = answers;
  if(!horizon || !loss || !goal || !exp) { alert('Por favor, responda todas as perguntas antes de calcular.'); return; }

  let score = 0;
  if(horizon === 'medio') score += 1;
  if(horizon === 'longo') score += 2;
  if(loss === 'pequena') score += 1;
  if(loss === 'alta') score += 3;
  if(goal === 'renda') score += 1;
  if(goal === 'crescer') score += 2;
  if(exp === 'intermediario') score += 1;
  if(exp === 'avancado') score += 3;

  let profile;
  if(score <= 2) profile = 'conservador';
  else if(score <= 5) profile = 'moderado';
  else profile = 'arrojado';

  const profiles = {
    conservador: {
      emoji:'üõ°Ô∏è', name:'Conservador', color:'var(--teal)',
      desc:'Prioriza a preserva√ß√£o do capital e seguran√ßa. Prefere previsibilidade e baixa volatilidade.',
      horizon:'Curto a m√©dio prazo', retorno:'CDI a CDI+2%', risk:15,
      allocs:[
        {label:'Renda Fixa P√≥s-fixada',pct:60,color:'var(--teal)'},{label:'Tesouro IPCA+',pct:25,color:'var(--blue)'},{label:'Multimercado Baixo Risco',pct:10,color:'var(--muted)'},{label:'Renda Vari√°vel',pct:5,color:'var(--gold)'}],
      tags:[
        {name:'Tesouro Selic',color:'var(--teal)',bg:'rgba(0,201,167,0.1)'},{name:'CDB 100% CDI',color:'var(--teal)',bg:'rgba(0,201,167,0.1)'},{name:'LCA / LCI',color:'var(--blue)',bg:'rgba(74,127,255,0.1)'},{name:'IPCA+',color:'var(--blue)',bg:'rgba(74,127,255,0.1)'},{name:'Poupan√ßa',color:'var(--muted)',bg:'rgba(107,116,148,0.1)'}],
    },
    moderado: {
      emoji:'‚öñÔ∏è', name:'Moderado', color:'var(--blue)',
      desc:'Busca equil√≠brio entre seguran√ßa e crescimento. Aceita alguma volatilidade por retornos melhores.',
      horizon:'M√©dio a longo prazo', retorno:'CDI+3% a CDI+6%', risk:45,
      allocs:[
        {label:'Renda Fixa',pct:50,color:'var(--blue)'},{label:'FIIs',pct:15,color:'var(--gold)'},{label:'A√ß√µes (ETFs)',pct:20,color:'var(--gold)'},{label:'Multimercado',pct:15,color:'var(--purple)'}],
      tags:[
        {name:'CDB IPCA+',color:'var(--blue)',bg:'rgba(74,127,255,0.1)'},{name:'Deb√™ntures incentivadas',color:'var(--blue)',bg:'rgba(74,127,255,0.1)'},{name:'FIIs',color:'var(--gold)',bg:'rgba(201,168,76,0.1)'},{name:'ETFs (BOVA11)',color:'var(--gold)',bg:'rgba(201,168,76,0.1)'},{name:'Multimercado',color:'var(--purple)',bg:'rgba(155,109,255,0.1)'}],
    },
    arrojado: {
      emoji:'üöÄ', name:'Arrojado', color:'var(--gold)',
      desc:'Foca em maximizar retorno de longo prazo. Tolera perdas tempor√°rias significativas.',
      horizon:'Longo prazo (5+ anos)', retorno:'IPCA+8% a +20%', risk:80,
      allocs:[
        {label:'A√ß√µes',pct:50,color:'var(--gold)'},{label:'FIIs',pct:15,color:'var(--orange)'},{label:'Renda Fixa',pct:20,color:'var(--blue)'},{label:'Fundos/Alternativos',pct:15,color:'var(--purple)'}],
      tags:[
        {name:'A√ß√µes ON',color:'var(--gold)',bg:'rgba(201,168,76,0.1)'},{name:'Small Caps',color:'var(--gold)',bg:'rgba(201,168,76,0.1)'},{name:'BDRs',color:'var(--orange)',bg:'rgba(255,159,67,0.1)'},{name:'Op√ß√µes (hedge)',color:'var(--red)',bg:'rgba(255,107,107,0.1)'},{name:'FIP',color:'var(--purple)',bg:'rgba(155,109,255,0.1)'},{name:'Multimercado Macro',color:'var(--purple)',bg:'rgba(155,109,255,0.1)'}],
    }
  };

  const p = profiles[profile];
  document.getElementById('profile-placeholder').style.display = 'none';
  const content = document.getElementById('profile-content');
  content.innerHTML = `
    <div class="profile-header">
      <div class="profile-icon" style="background:rgba(255,255,255,0.05);">${p.emoji}</div>
      <div>
        <div class="profile-name" style="color:${p.color}">${p.name}</div>
        <div class="profile-desc">${p.desc}</div>
      </div>
    </div>

    <div class="risk-meter">
      <div class="risk-meter-title">Toler√¢ncia ao Risco</div>
      <div class="risk-track"><div class="risk-pointer" id="risk-ptr" style="left:0%"></div></div>
      <div class="risk-labels"><span>Conservador</span><span>Moderado</span><span>Arrojado</span></div>
    </div>

    <div class="horizon-info">
      <div class="h-info-item">
        <div class="h-info-label">Horizonte</div>
        <div class="h-info-val" style="color:${p.color}">${p.horizon}</div>
      </div>
      <div class="h-info-item">
        <div class="h-info-label">Retorno esperado</div>
        <div class="h-info-val" style="color:${p.color}">${p.retorno}</div>
      </div>
    </div>

    <div class="alloc-chart">
      <div class="alloc-chart-title">Aloca√ß√£o Sugerida</div>
      ${p.allocs.map((a,i) => `
        <div class="alloc-row">
          <span class="alloc-label" style="color:${a.color}">${a.label}</span>
          <div class="alloc-bar-wrap">
            <div class="alloc-bar" style="--bar-w:${a.pct}%;background:${a.color};width:${a.pct}%;animation-delay:${0.1+i*0.1}s;"></div>
          </div>
          <span class="alloc-pct" style="color:${a.color}">${a.pct}%</span>
        </div>`).join('')}
    </div>

    <div class="recommended-instruments">
      <div class="rec-title">Instrumentos Recomendados</div>
      <div class="rec-tags">
        ${p.tags.map(t => `<span class="rec-tag" style="color:${t.color};border-color:${t.color};background:${t.bg}">${t.name}</span>`).join('')}
      </div>
    </div>
  `;
  content.classList.add('visible');

  setTimeout(() => {
    const ptr = document.getElementById('risk-ptr');
    if(ptr) ptr.style.left = p.risk + '%';
  }, 100);
}

// Init ‚Äî injeta valores reais imediatamente sem precisar de API
window.addEventListener('DOMContentLoaded', () => {
  liveIndicators.selic = 14.90;
  liveIndicators.cdi   = 15.00;
  liveIndicators.ipca  = 4.40;
  liveIndicators.ibov  = 8.0;

  const tag = document.getElementById('bm-date-tag');
  if(tag) tag.innerHTML = '<span style="color:var(--teal)">‚óè</span> Selic: 14,90% &nbsp;|&nbsp; CDI: 15,00% &nbsp;|&nbsp; IPCA 12m: 4,40% &nbsp;¬∑&nbsp; fev/2025';
});

setTimeout(() => {
  setScenario('alto');
  // Tenta atualizar via API em background ‚Äî se falhar, mant√©m valores fixos acima
  loadLiveIndicators().catch(() => {});
}, 100);

setTimeout(() => {
  const card = document.getElementById('card-bank');
  if(card) { card.style.boxShadow='0 0 0 3px rgba(74,127,255,0.3)'; setTimeout(()=>card.style.boxShadow='',1200); }
}, 1800);

// ===== SPLASH =====

function enterApp() {
  const splash = document.getElementById('splash');
  const btn = document.getElementById('back-btn');
  splash.classList.add('hide');
  setTimeout(() => {
    splash.style.display = 'none';
    btn.style.display = 'flex';
  }, 850);
}

function goBack() {
  const splash = document.getElementById('splash');
  const btn = document.getElementById('back-btn');
  splash.style.display = 'flex';
  // pequeno delay para o display flex pegar antes da transi√ß√£o
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      splash.classList.remove('hide');
    });
  });
  btn.style.display = 'none';
}


// Gerar part√≠culas flutuantes
(function() {
  const container = document.getElementById('splash-particles');
  if (!container) return;
  for (let i = 0; i < 28; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    const x = Math.random() * 100;
    const y = Math.random() * 100;
    const tx = (Math.random() - 0.5) * 60 + 'px';
    const ty = (Math.random() - 0.5) * 60 + 'px';
    const dur = (3 + Math.random() * 4).toFixed(1) + 's';
    const delay = (Math.random() * 3).toFixed(1) + 's';
    p.style.cssText = `left:${x}%;top:${y}%;--tx:${tx};--ty:${ty};--dur:${dur};--delay:${delay};`;
    container.appendChild(p);
  }
})();

</script>
</body>
</html>
